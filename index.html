<!DOCTYPE html>

<html lang="es">

<head>

    <meta charset="UTF-8" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Tarifas TUPA – TUSNE</title>



    <!-- CSS -->

    <link rel="stylesheet" href="style.css" />



    <!-- Bootstrap Icons -->

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">



    <!-- jsPDF + autoTable (para exportar PDF) -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>

</head>



<body>



<header class="site-header">

    <h1>Tarifario TUPA / TUSNE</h1>

    <p class="subtitle">Consulta interactiva de tarifas vigentes en la UNH</p>

</header>



<div class="container">



    <!-- Filtros -->

    <div class="controls">



        <!-- Buscador -->

        <div class="search-wrap">

            <input id="searchInput" type="text" placeholder="Buscar (tarifa, proceso, unidad, área)...">

        </div>



        <!-- Selects + Export -->

        <div class="filters-wrap">

            <div style="display:flex; gap:8px; align-items:center;">

                <select id="unidadFilter" class="filter-select">

                    <option value="">Unidad Responsable</option>

                </select>



                <!-- Export PDF button (a la derecha del select) -->

                <button id="exportPdfBtn" class="btn-export" title="Exportar tarifas a PDF">

                    <i class="bi bi-file-earmark-pdf-fill"> Exportar PDF

                </button>

            </div>

        </div>



        <!-- Monto -->

        <div class="monto-filter">

            <div class="monto-label">Monto (S/)</div>



            <div class="slider-wrap">

                <input type="range" id="minMonto" min="0" max="3000" value="0">

                <input type="range" id="maxMonto" min="0" max="3000" value="3000">

            </div>



            <div class="monto-values">

                <span id="minMontoValue">0</span>

                <span id="maxMontoValue">3000</span>

            </div>

        </div>



    </div>



    <!-- Estado -->

    <div id="status" class="status"></div>

    <div class="tarifa-warning">

    ⚠️ Los montos mostrados corresponden a tarifas base.

    El total a pagar puede incluir comisiones adicionales según el canal de recaudación

    (Caja UNH, Banco de la Nación, Caja Huancayo, Niubiz, etc.).

    </div>

    <!-- Cards -->

    <div id="cardsContainer" class="cards"></div>



    <!-- Paginación -->

    <div id="pagination" class="pagination"></div>

</div>



<!-- Modal -->

<div id="modalOverlay" class="modal-overlay hidden" aria-hidden="true">

    <div class="modal" role="dialog" aria-modal="true">



        <!-- Botón cerrar -->

        <button id="modalClose" class="modal-close">

            <i class="bi bi-x-circle-fill"> Cerrar

        </button>



        <!-- Título -->

        <h2 id="modalTitle" class="modal-title"></h2>



        <!-- Meta con íconos -->

        <div class="modal-meta">



            <p>

                <i class="bi bi-building">

                <strong>Centro de costo / Unidad responsable:</strong>

                <span id="modalUnidad"></span>

            </p>



            <p>

                <i class="bi bi-diagram-3">

                <strong>Área Encargada:</strong>

                <span id="modalArea"></span>

            </p>



            <p>

                <i class="bi bi-envelope-fill">

                <strong>Correo:</strong>

                <a id="modalCorreoLink" href="#" target="\\\_blank">

                    <span id="modalCorreo"></span>

                </a>

            </p>



            <p>

                <i class="bi bi-telephone-fill">

                <strong>Teléfono:</strong>

                <a id="modalTelefonoLink" href="#" target="\\\_blank">

                    <span id="modalTelefono"></span>

                </a>

            </p>

        </div>



        <h3 class="req-title">Requisitos</h3>

        <div id="modalRequisitos" class="modal-body"></div>



        <!-- Calculadora de comisiones: canal + resultado -->

        <div class="calc-section">

            <label for="canalSelect"><strong>Calcular estimado por canal:</strong></label>

            <select id="canalSelect" class="filter-select small">

                <option value="">Seleccionar canal...</option>

                <option value="caja\\\_unh">Caja UNH (S/1.00, aplica S/ ≥ 20)</option>

                <option value="bn\\\_fijo">Banco de la Nación (S/1.80 para S/0.10–S/144)</option>

                <option value="bn\\\_pct">Banco de la Nación (1.25% para > S/144)</option>

                <option value="caja\\\_huancayo">Caja Huancayo (S/1.00)</option>

                <option value="niubiz">Niubiz (Yape/Visa/Mcard 5.8%)</option>

            </select>



            <div id="estimationResult" class="estimation-result" aria-live="polite" style="margin-top:10px;"></div>

        </div>



    </div>

</div>



<!-- ⬇️ AÑADIDO: PapaParse y Fuse.js ⬇️ -->

<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2/dist/fuse.basic.min.js"></script>



<!-- Tu script principal -->

<script src="script.js"></script>



</body>

</html>
